# Medical Division PoC | Customer Base System (CBS)

### My Markdown Site
[TLabs-Streams](https://tstreams.netlify.com/)
---

### Overview
The system we will cover in this article is part of the Spring Framework :: A gentle introduction series. Specifically, in line with the PoC functionalities, we will develop the functionalities necessary to manage the customer base of our product.  

It manages the customer base: each user can be either a patient or a doctor or a service person in a doctor's office. Each user has an account to access the services provided by the system. Each account is provided with additional information that the system uses for the correct attribution of the services belonging to that particular user, both as a patient and medical staff.  

---
We are going to develop some business scenarios, even if simple, that will concern the following:  

- The registration of a generic user profile, intended by default as patient.
- Account activation for the first access to the system
- Access to the platform as a generic user that initiates the platform's verification of its profile as a doctor qualified to practice its profession.

The details of these three features will be discussed in detail in the next articles, also in terms of User Stories and Acceptance criteria

---

### Technical asset
It is a Spring Web Application deployed to Apache Tomcat as a WAR package.
The developed code is used to have a simple web application with the following topics, in according to actual articles provided by my personal web-site:
- Maven multi-modules Parent-Child Layout
- Spring 5 Web Application
- SOAP Web Services with Apache CXF
- Persistence with Hibernate/JPA
- Apache Tomcat
- PostgreSQL DB
- Docker/Docker-Compose project to manage Apache Tomcat Image and PostgreSQL DB

> Note: at this time in according to articles published, the application contains only SOAP Web Service definition and Docker/Docker-Compose for Tomcat

---
### Build and Run

#### First step

Clone the main project

```bash
git clone https://github.com/ant-giannone/tlabs-md-customer-base-sys
```

The **master branch** contains the merges of all other branches focused on a specific article published on my web-site
If you what view code for a specific articles, you only need to checkout on a specific branch


#### Second step

Open your console and position yourself in the project folder **tlabs-md-customer-base-sys/docker**  

Here, you have the **docker** folder with docker compose and the necessary files for tomcat configuration.  
You have already a user settings for access to Tomcat Dashboard, the user is: 
- Username: tomcat-g
- Password: tomcat

Well, now you can type the command:  

```bash
docker-compose -f docker-compose.yml up -d
```

Next you can follow the logs if you type:
```bash
 docker logs -f tlabs-md-cbs
```

If you can see the following logging lines, your Tomcat is ready to used
```bash
08-Dec-2019 14:04:35.750 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["http-nio-8080"]
08-Dec-2019 14:04:35.858 INFO [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["ajp-nio-8009"]
08-Dec-2019 14:04:35.860 INFO [main] org.apache.catalina.startup.Catalina.start Server startup in 12716 ms
```

If it is true that everything is ok, you should be able to access tomcat at the following url
```
http://localhost:8888/
```

Click on Manager App and insert Username/Password required: **tomcat-g/tomcat**


#### Third Step

Open your console and position yourself in the project folder **tlabs-md-customer-base-sys**  

Type on console the following command and build all:

```bash
mvn clean package
```

Now you have the package **tlabs-md-cbs.war** placed in the path **tlabs-md-customer-base-sys/tlabs-md-customer-base-ptl/target**


### Fourth Step

Open In your browser the tomcat dashboard e manually deploy the package. If it's all ok, you can see a new app on tomcat application list: **/tlabs-md-cbs**  

Click on **/tlabs-md-cbs** and you can see the html default page generated by Apache CXF that list all SOAP Services available.

You can test the SOAP Service with SOAP-UI and import the WSDL file produced by Apache CXF that you can see if you click on cxf link produced
---

**I hope I have done something pleasant!**
**Good code to all, see you next time...**
